&emsp;&emsp;不久以前，我们在本章一开始所呈现的场景--支持成千上万的并发客户端--还被认为是不可能的。然而今天，作为系统用户，我们将这种能力视为理所当然；同时作为开发人员，我们期望将水平线提的更高[3](备注)。因为我们知道，总会有更高的吞吐量和可扩展性的要求--在更低的成本的基础上进行交付。

&emsp;&emsp;不要低估了这最后一点的重要性。我们已经从漫长的痛苦经历中学到：直接使用底层的API暴露了复杂性，并且引入了对旺旺供不应求的技能的关键型依赖[4](备注)。这也就是，面向对象的基本概念：用较简单的抽象隐藏底层实现的复杂性。

&emsp;&emsp;这一原则也催生了大量框架的开发，我们为常见的编程任务封装了解决方案，其中的许多都和分布式系统的开发密切相关。我们可以确定的说：所有专业的Java开发人员都至少对它们熟知一二。[5](备注)对于我们许多人来说，我们已经变得不可或缺，因为它们技能满足我们的技术需求，又能满足我们的时间表。

&emsp;&emsp;在网络编程领域，Netty是Java的卓越框架。[6](备注)**它驾驭了Java高级API的能力，并将其隐藏在一个易于使用的API之后**。Netty使你可以专注于自己真正感兴趣的--你的应用程序的独一无二的价值。

&emsp;&emsp;在我们开始首次深入的了解Netty之前，请仔细审视表1-1中所总结的关键特性。有些是技术性的，而其他的更多的则是关于架构或设计哲学的。在本书的学习过程中，我们将不止一次地重新审视它们。

&emsp;&emsp;表1-1 **Netty的特性总结**

分类 | Netty的特性
---|---
设计 | 统一的API，支持多种传输类型，阻塞的和非阻塞的简单而强大的线程模型真正的无连接数据报套接字支持链接逻辑组件以支持复用
易于使用 | 详实的Javadoc和大量的示例集不需要超过JDK1.6+[7](备注)的依赖。（一些可选的特性可能需要Java1.7+和/或额外的依赖）
性能 | 拥有比Java的核心API更高的吞吐量以及更低的延迟得益于池化和复用，拥有更低的资源消耗最少的内存复制
健壮性 | 不会因为慢速、快速或者超载的连接而导致OutOfMemoryError消除在高速网络中NIO应用程序常见的不公平读/写比率
安全性 | 完整的SSL/TLS以及StartTLS支持可用于受限环境下，如Applet和OSGI
社区驱动 | 发布快速而且频繁

## 1.2.1 谁在使用Netty

&emsp;&emsp;Netty拥有一个充满活力并且不断壮大的用户社区，其中不乏大型公司，如Apple、Twitter、Facebook、Google、Square和Instagram，还有流行的开源项目，如Infinispan、HornetQ、Vert.x、Apache Cassandra和Elasticsearch[8](备注)，它们所有的核心代码都利用了Netty强大的网络抽象[9](备注)。在初创企业中，Firebase和Urban Airship也在使用Netty，前者用来做HTTP长连接，而后河用来支持各种各样的推送通知。

&emsp;&emsp;每当你使用Twitter，你便是在使用Finagle[10](备注)，它们基于Netty的系统间通信框架。Facebook在Nifty中使用了Netty，它们的Apache Thrift服务。可伸缩性和性能对这两家公司来说至关重要，他们也经常为Netty贡献代码[11](备注)。

&emsp;&emsp;反过来，Netty也已从这些项目中受益，通过实现FTP、SMTP、HTTP和WebSocket以及其他的基于二进制和基于文本的协议，Netty扩展了它的应用范围及灵活性。

## 1.2.2 异步和事件驱动

&emsp;&emsp;因为我们要大量的使用“异步”这个词，所以现在是一个澄清上下文的好时机。异步（也就是非同步）事件肯定大家都熟悉。考虑一下电子邮件：你可能会也可能不会受到你已经发出去的电子邮件对应的回复，或者你也可能会在正在发送一封电子邮件的时候收到一个意外的消息。异步事件也可以具有某种有序的关系。通常，你只有在已经问了一个问题之后才会得到一个和它对应的答案，而在你等待它的同时你也可以做点别的事情。

&emsp;&emsp;在日常的生活中异步自然而然的就发生了，所以你可能没有对它考虑过多少。但是让一个计算机程序以相同的方式工作就会产生一些非常特殊的问题。本质上，一个既是异步的又是事件驱动的系统会表现出一种特殊的、对我们来说极具价值的行为：它可以以任意的顺序响应在任意的时间点产生的事件。

&emsp;&emsp;这种能力对于实现最高级别的可伸缩性至关重要，定义为：“一种系统、网络或者进程在需要处理的工作不断增长时，可以通过某种可行的方式或者扩大它的处理能力来适应这种增长的能力。”[12](备注)异步和可伸缩性的联系又是什么呢?

- 非阻塞网络调用使得我们可以不必等待一个操作的完成。完全异步的I/O正是基于这个特性构建的，并且更近一步：异步方法会立即返回，并且在它完成时，会直接或者在稍后的某个时间点通知用户。
- 选择器使得我们能够通过较少的线程便可监视许多连接上的事件。

&emsp;&emsp;将这些元素结合在一起，与使用阻塞I/O来处理大量事件相比，使用非阻塞I/O来处理更快速、更经济。从网络编程的角度来看，这是构建我们理想系统的关键，而且你会看到，这也是Netty的设计底蕴的关键。

&emsp;&emsp;在1.3节中，我们将首先看一看Netty的核心组件。现在，只需要将它们看做是域对象，而不是具体的Java类。随着时间的推移，我们将看到它们是如何写作，来为在网络上发生的事件提供通知，并使得它们可以被处理的。
